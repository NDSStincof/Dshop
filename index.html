<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <shortcut icon="Dshop.png"/>
  <title>Dshop</title>
  <style>
    /* Styles CSS */
  </style>
</head>
<body>
  <header>
    <!-- En-tête -->
  </header>

  <main id="articlesContainer">
    <!-- Articles générés dynamiquement -->
  </main>

  <!-- Div pour les détails de l'article -->
  <div id="articleDetails" style="display:none;"></div>

  <footer>
    <!-- Pied de page -->
  </footer>

  <!-- Script PayPal SDK -->
  <script src="https://www.paypal.com/sdk/js?client-id=ASW8iU6SRJ_929hu5D1Chlrq1wEn4hiDHnLFv0HoKgrJZVWDljbrY6UyfnCuj0Df0YAcrtN05TDONzWh"></script>

  <script>
    // Fonction pour générer les articles
    function generateArticle(nomProduit, prix, image, description) {
      const article = document.createElement('div');
      article.classList.add('article');
      article.onclick = function() {
        openArticle(nomProduit, prix, image, description);
      };
      article.innerHTML = `
        <img src="${image}" alt="${nomProduit}">
        <div class="article-info">
          <h2>${nomProduit}</h2>
          <p>Prix: ${prix}</p>
        </div>
      `;
      return article;
    }

    // Fonction pour ouvrir les détails de l'article
    function openArticle(nomProduit, prix, image, description) {
      const mainTitle = document.getElementById("mainTitle");
      const articlesContainer = document.getElementById("articlesContainer");
      const articleDetails = document.getElementById("articleDetails");
      mainTitle.style.display = "none"; // Cache le titre "Articles"
      articlesContainer.style.display = "none"; // Cache les articles

      // Créer le contenu de la div articleDetails
      const articleDetailsContent = `
        <div class="article-details">
          <img src="${image}" alt="${nomProduit}">
          <div class="article-details-info">
            <h2>${nomProduit}</h2>
            <p><b>Prix:</b> ${prix}</p>
            <p>${description}</p>
            <!-- Formulaire de commande -->
            <form id="orderForm" onsubmit="return sendOrderEmail(event, '${nomProduit}', '${prix}')">
              <label for="customerName">Nom et prénom :</label><br>
              <input type="text" id="customerName" name="name" required><br>
              <label for="customerAddress">Adresse de livraison :</label><br>
              <input type="text" id="customerAddress" name="address" required><br>
              <label for="customerEmail">Adresse e-mail :</label><br>
              <input type="email" id="customerEmail" name="email" required><br>
              <label for="additionalInfo">Informations supplémentaires :</label><br>
              <textarea id="additionalInfo" name="additionalInfo"></textarea><br>
              <button type="submit" class="order-button">Envoyer la commande</button>
            </form>
          </div>
        </div>
      `;

      articleDetails.innerHTML = articleDetailsContent;
      articleDetails.style.display = "block"; // Affiche les détails de l'article
    }

    // Générer les articles
    const articlesContainer = document.getElementById("articlesContainer");
    articlesContainer.appendChild(generateArticle("Lightsaber with multi color", "44.99€", "lightsaber_image_1.jpeg", "You want to become a jedi or a sith, here is a lightsaber with more than ten blade colors (RGB) <br> Vous souhaitez devenir un jedi ou un sith, voici un sabre laser avec plus de dix couleurs de lame (RVB) <br> Size: full length 80CM/handle 25CM (diameter 30MM)/sword body about 60CM <br>Taille : pleine longueur 80CM/poignée 25CM (diamètre 30MM)/corps de l'épée environ 60CM"));
    articlesContainer.appendChild(generateArticle("The most powerful water gun", "54.99€", "the_most_powerful_water_gun_image_1.jpeg", "Here is one of the most powerful water guns in the world,<br> with its futuristic shape and incredible power. Perfect for water fights <br> Voici l'un des pistolets à eau les plus puissants au monde, <br>avec sa forme futuriste et sa puissance incroyable. Parfait pour les batailles d'eau <br> The battery and its charger are included <br> La batterie et son chargeur sont inclus"));
    articlesContainer.appendChild(generateArticle("Super balle à effet", "24.99€", "super_effect_ball_image_2.jpeg", "You want to make shots with superb effects like your favorite footballers, here is a ball that produces very fun effects <br>Vous souhaitez réaliser des clichés avec de superbes effets comme vos footballeurs préférés, <br>voici un ballon qui produit des effets très amusants "));
    articlesContainer.appendChild(generateArticle("Glock water gun", "24.99€", "Glock_water_gun_image_1.png", "Here is an easy to carry water gun with superb power. Very funny <br> Voici un pistolet à eau facile à transporter et doté d'une superbe puissance. Très drôle <br> The battery and its charger are included <br> La batterie et son chargeur sont inclus"));
    articlesContainer.appendChild(generateArticle("Spiderman Webshooter", "49.99€", "spiderman_webshooter_image1.jpeg", "Do you like Spiderman? Here is his Webshooter which launches real projectiles <br> Aimez-vous Spiderman? Voici son Webshooter qui lance de vrais projectiles <br> Color : black / couleur : noir"));
    articlesContainer.appendChild(generateArticle("Submachine water gun", "49.99€", "submachine_water_gun.jpeg", "Here is an assault rifle for the best water fights between friends <br> Voici un fusil d'assaut pour les meilleurs batailles d'eau entre amis <br> The battery and its charger are included <br> La batterie et son chargeur sont inclus"));
    articlesContainer.appendChild(generateArticle("Balle météore rebondissante ", "4.99€", "Balle_météore_rebondissante.png", ""));

    function sendOrderEmail(event, nomProduit, prix) {
      event.preventDefault(); // Empêche la soumission du formulaire

      const customerName = document.getElementById('customerName').value.trim();
      const customerAddress = document.getElementById('customerAddress').value.trim();
      const customerEmail = document.getElementById('customerEmail').value.trim();
      const additionalInfo = document.getElementById('additionalInfo').value.trim();

      if (!customerName || !customerAddress || !customerEmail) {
        alert('Veuillez remplir tous les champs obligatoires.');
        return false;
      }

      if (!isValidEmail(customerEmail)) {
        alert('Veuillez entrer une adresse e-mail valide.');
        return false;
      }

      const orderDetails = `Nom: ${customerName}\nAdresse: ${customerAddress}\nE-mail: ${customerEmail}\nProduit: ${nomProduit}\nPrix: ${prix}€\n\nInformations supplémentaires :\n${additionalInfo}`;

      const mailtoLink1 = `mailto:nds-stincof@hotmail.com?subject=Nouvelle commande&body=${encodeURIComponent(orderDetails)}`;
      const mailtoLink2 = `mailto:thedshopbuy@gmail.com?subject=Nouvelle commande&body=${encodeURIComponent(orderDetails)}`;

      window.open(mailtoLink1);
      window.open(mailtoLink2);

      // Rediriger vers la page de paiement PayPal
      const paypalForm = document.createElement('form');
      paypalForm.method = 'post';
      paypalForm.action = 'https://www.paypal.com/cgi-bin/webscr';
      paypalForm.target = '_top';

      const cmdInput = document.createElement('input');
      cmdInput.type = 'hidden';
      cmdInput.name = 'cmd';
      cmdInput.value = '_xclick';
      paypalForm.appendChild(cmdInput);

      const businessInput = document.createElement('input');
      businessInput.type = 'hidden';
      businessInput.name = 'business';
      businessInput.value = 'oliel.lenny@gmail.com';
      paypalForm.appendChild(businessInput);

      const currencyCodeInput = document.createElement('input');
      currencyCodeInput.type = 'hidden';
      currencyCodeInput.name = 'currency_code';
      currencyCodeInput.value = 'EUR';
      paypalForm.appendChild(currencyCodeInput);

      const itemNameInput = document.createElement('input');
      itemNameInput.type = 'hidden';
      itemNameInput.name = 'item_name';
      itemNameInput.value = nomProduit;
      paypalForm.appendChild(itemNameInput);

      const amountInput = document.createElement('input');
      amountInput.type = 'hidden';
      amountInput.name = 'amount';
      amountInput.value = prix.replace('€', '');
      paypalForm.appendChild(amountInput);

      document.body.appendChild(paypalForm);
      paypalForm.submit();

      return false; // Empêche la soumission du formulaire
    }

    // Fonction pour valider l'adresse e-mail
    function isValidEmail(email) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
    }
  </script>
</body>
</html>
